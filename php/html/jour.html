<!-- jour.html 
	Version : 1.0.4
	Date : 2021-06-15
-->

{include="header"}

<body>
	<!--  Fenêtre modale Ajouter ou modifier un enregistrement  -->
	<div class="modal fade" id="adherentModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-xl" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title"><i class="fas fa-user-plus"></i> Fiche licencié</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>

				<div class="container py-5">
					<div class="row">
						<div class="col-md-10 mx-auto">
							<div class="modal-body">
								<form class="was-validated" id="id_form_save_licencier" method="get">
									<div class="form-group row">
										<div class="col-sm-6">
											<label for="addLicence" class="col-form-label">N° Licence : </label>
											<input type="number" min="1" class="form-control" id="addLicence" name="addLicence" placeholder="Saisir votre numéro de licence FFTT" value="{$licencier.id_licencier}" required>
											<div class="valid-feedback">Valide</div>
											<div class="invalid-feedback">Erreur dans la saisie.</div>
										</div>

										<div class="col-sm-6">
											<label class="col-form-label">Civilité : </label>
											<div>
												<label class="radio-inline">
												<input type="radio" name="addCivilite" value="Mr" id="addCiviliteMr" {if="$licencier.Civilite == 'Mr'"}checked="checked" {/if}/> Mr </label>
												<label class="radio-inline">
												<input type="radio" name="addCivilite" value="Mme" id="addCiviliteMme" {if="$licencier.Civilite == 'Mme'"}checked="checked" {/if}/> Mme </label>
											</div>
										</div>
									</div>

									<div class="form-group row">
										<div class="col-sm-6">
											<label for="addNom" class="col-form-label">Nom : </label>
											<input type="text" class="form-control" id="addNom" name="addNom" placeholder="Saisir votre nom de famille" style="text-transform:uppercase" value="{$licencier.Nom}" required>
											<div class="valid-feedback">Valide</div>
											<div class="invalid-feedback">Erreur dans la saisie.</div>
										</div>

										<div class="col-sm-6">
											<label for="addSurnom" class="col-form-label">Surnom : </label>
											<input type="text" class="form-control" id="addSurnom" name="addSurnom" placeholder="Saisir votre surnom" value="{$licencier.Surnom}" >
										</div>
									</div>

									<div class="form-group row">
										<div class="col-sm-6">
											<label for="addPrenom" class="col-form-label">Prénom : </label>
											<input type="text" class="form-control" id="addPrenom" name="addPrenom" placeholder="Saisir votre prénom" value="{$licencier.Prenom}" required>
											<div class="valid-feedback">Valide</div>
											<div class="invalid-feedback">Erreur dans la saisie.</div>
										</div>

										<div class="col-sm-6">
											<label for="addEquipe" class="col-form-label">N° d'équipe (0 - Loisir) : <output name="valueEquipe" id="valueEquipe">{$licencier.Equipe}</output>
											</label> <input type="range" min="0" max="{#NOMBRE_EQUIPE#}" 
												class="form-control range" id="addEquipe" name="addEquipe"
												value="{$licencier.Equipe}" oninput="valueEquipe.value = addEquipe.value">
										</div>
									</div>

									<div class="form-group row">
										<div class="col-sm-6">
											<label for="addTelephone" class="col-form-label">Téléphone : </label>
											<input type="tel" class="form-control" id="addTelephone" name="addTelephone"
												placeholder="Numéro de téléphone 06.02.03.04.05 (Portable où Fixe)"
												pattern="^(0)[1-9]([-. ]?[0-9]{2}){3}([-. ]?[0-9]{2})$" value="{$licencier.Telephone}" required>
											<div class="valid-feedback">Valide</div>
											<div class="invalid-feedback">Erreur dans la saisie.</div>
										</div>

										<div class="col-sm-6">
											<label for="addEmail" class="col-form-label">Email : </label>
											<input type="email" class="form-control" id="addEmail" name="addEmail" placeholder="Saisir votre adresse de messagerie" value="{$licencier.Email}" required>
											<div class="valid-feedback">Valide</div>
											<div class="invalid-feedback">Erreur dans la saisie.</div>
										</div>
									</div>

									<div class="modal-footer">
										<button class="btn btn-secondary" data-dismiss="modal">Fermer</button>
										<input type="submit" class="btn btn-primary" value="Sauver">
									</div>

								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="container-sm">	
		<div class="alert alert-dark">
			<div class="row">
				<div class="col-1 align-self-start"><img width="96" height="96" src="img/logo.gif" text="{#LOGO_TITLE#}" alt="{#LOGO_TITLE#}"></div>
	        	<div class="col">&nbsp;</div>   
				<div class="col-4 align-self-end"><h6 class="text-center">{$now}</h6></div>
	      	</div>
	    </div>


	    <div class="alert alert-info text-center mt-2 mb-2">
    		Bonjour, {$licencier.Prenom}&nbsp; 
   			<button type="button" class="btn {$btn}" data-toggle="modal" title="{$btnMsg}" data-trigger="hover" data-target="#adherentModal"><i class="far fa-address-card fa-2x"></i></button>						
		</div> 
					
		<div class="mt-2 mb-2 rounded bg-light p-1">
		
		<center><i class="fas fa-calendar-alt fa-2x"> {$mois}</i></center>
		<br />
					
		
		<!-- Version bootstrap -->
		
		<div class="container mx-auto p-0">
       		<div class="row  justify-content-md-center">
				  <div class="col-1 m-1 h6">Lun</div>
				  <div class="col-1 m-1 h6">Mar</div>
				  <div class="col-1 m-1 h6">Mer</div>
				  <div class="col-1 m-1 h6">Jeu</div>
				  <div class="col-1 m-1 h6">Ven</div>
				  <div class="col-1 m-1 h6">Sam</div>
				  <div class="col-1 m-1 h6">Dim</div>
			</div>
						
			<div class="">
				<div class="row justify-content-md-center">{$lgn1}</div>
				<div class="row justify-content-md-center">{$lgn2}</div>
				<div class="row justify-content-md-center">{$lgn3}</div>
			</div>
		</div>
		
		{if="count($reservations) > 0"}
		<h3>Mes réservations :</h3>
		
		<table class="table table-sm">
		  <thead>
		    <tr>
		    	<th scope="col">Date</th>
				<th scope="col">Salle</th>
				<th scope="col">Heure début</th>
				<th scope="col">Heure Fin</th>
				<th scope="col">Action</th>
		    </tr>
		  </thead>
			<tbody>
				{loop="$reservations"}
					<tr>
						<td>{$value.Date}</td>
						<td>{$value.Salle}</td>
						<td>{$value.Heure_Debut}</td>
						<td>{$value.Heure_Fin}</td>
						<td><button onclick="DelReservation({$value.id_reservation})" title="Supprimer la réservation"><i class="fas fa-calendar-times"></i></button></td>
					</tr>
				{/loop}
			</tbody>
		</table>
		{/if}
	</div>
	</div>
	
	<div class="container">
		<div class="row mx-auto">
			<div class="col-4 pl-0 py-2">
				<form>
			     	<button class="btn btn-outline-warning btn-block  bg-light" type="submit"><i class="fas fa-sign-out-alt"></i> Quitter</button>
			   </form>
			</div>
		</div>
	</div>
</body>
	
<script>
	$(document).ready(
		function() {
			/*
			var table = $('#tReservation').DataTable({
				columnDefs : [ { targets: 0, visible : false } ]
			 });
			*/
			    
			// this is the id of the form
			$("#id_form_save_licencier").submit(function(e) {

			    e.preventDefault(); // avoid to execute the actual submit of the form.

			    var form = $(this);
			    
			    $.ajax({
		           type: "GET",
		           url: "admin.php?page=add_licencier",
		           data: form.serialize(), // serializes the form's elements.
		           success: function(response) { 
		        	   	var data = $.parseJSON(response);
		        	   	
		        	   	$.alert({
							columnClass: 'medium',
						    title: data.title,
						    content: data.content,
						    buttons: {
						        Ok: function () {
									// Rechargement des données
									location.reload();
						        }
						    }
						})
		    	   } 
			    })   
			})
	})
</script>

</html>